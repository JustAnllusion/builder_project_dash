# Дашборд для анализа недвижимости Москвы

Это интерактивное приложение построено с использованием [Streamlit](https://streamlit.io/). Оно позволяет анализировать данные о рынке недвижимости Москвы через удобный дашборд с таблицами, картой и графиками.

---

## Основные возможности

- **Табличное представление данных**  
  Просмотр данных в виде таблиц с возможностью экспорта.

- **Интерактивная карта**  
  Отображение объектов недвижимости на карте.

- **Анализ данных**  
  Построение графиков: гистограммы, скатерплоты, кривые выбытия и эластичности.

- **Динамическая фильтрация**  
  Глобальные и групповые фильтры позволяют быстро настраивать выборку данных.

- **Управление группами**  
  Возможность создавать и импортировать группы (например, через JSON) для более детального анализа.

---

## Структура проекта
```
project/
├── main.py                  # Основной скрипт: настройка страницы, загрузка данных, переключение вкладок
├── assets/
│   └── styles.css           # Стили для кастомизации внешнего вида
├── components/
│   ├── sidebar.py           # Боковая панель с фильтрами и управлением группами
│   └── widgets.py           # Вспомогательные виджеты для фильтрации
├── modules/
│   ├── data_tab.py          # Табличное представление данных
│   ├── map_tab.py           # Карта на pydeck
│   ├── analysis_tab.py      # Графики (гистограммы, скатерплоты и т.д.)
│   ├── prediction_tab.py    # Заглушка для предсказаний
│   └── clustering_tab.py    # Заглушка для кластеризации
└── utils/
    ├── utils.py             # Вспомогательные функции (загрузка, кэширование и пр.)
    └── elasticity.py        # Функции для вычисления эластичности
```
---

## Как работает приложение

### Архитектура Streamlit

**Полный ререндеринг:**  
Streamlit запускает весь скрипт каждый раз, когда пользователь меняет значение любого виджета. Чтобы не потерять настройки между обновлениями, мы используем `st.session_state` — глобальное хранилище для сохранения данных (например, активная вкладка, фильтры, группы).

**Схема работы Streamlit:**


[Пользователь вводит данные] -> [Полный запуск скрипта (рендеринг)] ->[Использование st.session_state для восстановления состояния] ->[Обновление интерфейса]


Подробнее можно прочитать в [документации по Session State](https://docs.streamlit.io/library/advanced-features/session-state).

### Основные компоненты

- **Главный скрипт (main.py):**  
  Настраивает страницу, загружает данные и организует переключение между вкладками (с использованием `st.radio` или `st.segmented_control`).

- **Вкладки:**  
  - **Data Tab:** Табличное представление данных.  
  - **Map Tab:** Интерактивная карта объектов недвижимости.  
  - **Analysis Tab:** Построение графиков для анализа (гистограммы, скатерплоты, кривые выбытия, эластичности).  
  - **Prediction/Clustering Tabs:** Заглушки для будущего функционала.

- **Боковая панель (sidebar):**  
  Здесь задаются глобальные фильтры для данных, а также управление динамическими группами. Это позволяет создавать, редактировать и удалять группы для детального анализа.

- **Утилиты и виджеты:**  
  В `utils` находятся функции для загрузки данных и вычислений, а в `components/widgets.py` — вспомогательные виджеты для работы с фильтрами.

### Кэширование и оптимизация

Для ускорения работы используется кэширование через декораторы вроде `@st.cache_data`. Это позволяет сохранять результаты дорогих вычислений (например, загрузки данных) и не выполнять их повторно при каждом ререндере.

### Интерактивность

Каждое изменение в интерфейсе (например, выбор фильтра, переключение вкладок, изменение настроек графиков) приводит к полному запуску скрипта, при этом состояние сохраняется через `st.session_state`. Это обеспечивает мгновенную реакцию приложения и возможность настроить визуализации «на лету».

---

## Запуск приложения

1. **Установка зависимостей:**  
   Установите все необходимые библиотеки:
   ```bash
   pip install -r requirements.txt
2. **Установка зависимостей:**  
   Установите все необходимые библиотеки:
   ```bash
   streamlit run main.py
